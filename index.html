<!DOCTYPE html>
<html>
<head>
	<title>Hvor er Malaga?</title>
	<meta name="viewport" content="width=device-width, initial-scale=0.75">
	<style type="text/css">
		body {
			margin: 0pt;
			padding: 0pt;
		}

		* {
			font-family: Arial;
		}

		p {
			/*text-indent: 18pt;*/
			margin-bottom: 12pt;
			font-size: 12pt;
			font-weight: 300;
		}

		h1 {
			font-weight: 200;
			font-size: 40pt;
			text-align: center;
		}

		.center {
			margin-right: auto;
			margin-left: auto;
		}

		.element {
			width: 850px;
			padding: 0px;
		}

		a {
			font-family: inherit;
			text-decoration: none;
			color: #31729b;
		}
		
		a:hover {
			outline-width:0;
			text-decoration: underline;
		}
	</style>
	<script type="text/javascript">
		// Database of Malaga placements. Lat, long, epoch.
		var malagaPlaceTimes = [
			[52.147041, 4.492871, 1528547903], // Leiden 2018	
			[50.075745, 14.438201, 1565440703] // Praha 2019
		]

		function getCurrentEpochStamp() {
			return Math.round((new Date()).getTime() / 1000);
		}

		function interpolate(from, to, time) {
			percent = (time - from[2]) / (to[2] - from[2])
			
			return [
				from[0] + (to[0] - from[0])*percent,
				from[1] + (to[1] - from[1])*percent,
				time
			];
		}

		function getCurrentMalagaDestination() {
			currentEpoch = getCurrentEpochStamp();

			lastPlace = malagaPlaceTimes[0];
			nextPlace = null;

			for (var i = 0; i < malagaPlaceTimes.length; i++) {
				if (malagaPlaceTimes[i][2] > currentEpoch) {
					next_place = malagaPlaceTimes[i];
					break;
				}
				else last_place = malagaPlaceTimes[i];
			}

			currentPoint = interpolate(last_place, next_place, currentEpoch);

			document.getElementById("mapFrame").src = "https://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=" + currentPoint[0] + "," + currentPoint[1] +"&z=5&output=embed";
		}
	</script>
</head>
<body onload="getCurrentMalagaDestination()">
	<h1>Hvor er Malaga?</h1>
	<iframe class="center" style="position: absolute; width: 100%; height: 70%; border: none" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" id="mapFrame" src="">
	</iframe>
	<div style="position: absolute; bottom: 5px; width: 100%">
		<div class="center element" ><p style="margin-top: 60px; text-align: center;"><a href="https://foreninger.uio.no/bb/arrangementer/mÃ¡laga-tour/">Forklaring</a></p></div>
	</div>
</body>
</html>
